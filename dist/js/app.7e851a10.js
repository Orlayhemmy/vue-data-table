(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)o=s[d],r[o]&&p.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0d1e":function(t,e,a){"use strict";var n=a("b503"),r=a.n(n);r.a},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"page-head"},[n("span",{staticClass:"page-head__page-title"},[t._v("Transactions")]),n("div",{staticClass:"filter"},[n("data-filter",{ref:"filter",attrs:{title:"Filter","action-button-text":"Filter","handle-submit":t.filterData}},[n("div",{staticClass:"filter-content"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"amount"===t.filterBy,expression:'filterBy === "amount"'}],staticClass:"filter-prop"},[n("p",{on:{click:function(e){t.setFilter("date")}}},[t._v("Filter by date")]),n("span",{staticClass:"error-message"},[t._v(t._s(t.error.message))]),n("label",[t._v("Amount")]),n("span",{staticClass:"error-message"},[t._v(t._s(t.error.amount))]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCriteria.minAmount,expression:"searchCriteria.minAmount"}],attrs:{type:"number",placeholder:"Min"},domProps:{value:t.searchCriteria.minAmount},on:{input:function(e){e.target.composing||t.$set(t.searchCriteria,"minAmount",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCriteria.maxAmount,expression:"searchCriteria.maxAmount"}],attrs:{type:"number",placeholder:"Max"},domProps:{value:t.searchCriteria.maxAmount},on:{input:function(e){e.target.composing||t.$set(t.searchCriteria,"maxAmount",e.target.value)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"date"===t.filterBy,expression:'filterBy === "date"'}],staticClass:"filter-prop"},[n("p",{on:{click:function(e){t.setFilter("amount")}}},[t._v("Filter by amount")]),n("label",[t._v("Date")]),n("span",{staticClass:"error-message"},[t._v(t._s(t.error.date))]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCriteria.startDate,expression:"searchCriteria.startDate"}],attrs:{type:"date",placeholder:"Start"},domProps:{value:t.searchCriteria.startDate},on:{input:function(e){e.target.composing||t.$set(t.searchCriteria,"startDate",e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCriteria.endDate,expression:"searchCriteria.endDate"}],attrs:{type:"date",placeholder:"End"},domProps:{value:t.searchCriteria.endDate},on:{input:function(e){e.target.composing||t.$set(t.searchCriteria,"endDate",e.target.value)}}})])])])])],1)]),n("div",[n("data-table",{attrs:{"table-head":t.tableHead}},t._l(t.tableData,function(e){return n("tr",{key:e[".key"]},[n("td",[t._v(t._s(e.name))]),n("td",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.getDataId!==e.dataKey,expression:"getDataId !== entry.dataKey"}],staticClass:"dt_description"},[t._v("\n            "+t._s(e.description)+"\n            "),n("img",{attrs:{src:a("b0e3"),alt:"edit-icon"},on:{click:function(a){t.toggleInputBox(e)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.getDataId===e.dataKey,expression:"getDataId === entry.dataKey"}],staticClass:"dt_description_input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.getDescription,expression:"getDescription"}],attrs:{type:"text"},domProps:{value:t.getDescription},on:{input:function(e){e.target.composing||(t.getDescription=e.target.value)}}}),n("div",{staticClass:"action-buttons"},[n("span",{on:{click:t.updateDescription}},[t._v("âœ“")]),n("span",{on:{click:t.toggleInputBox}},[t._v("âœ•")])])])]),n("td",[t._v(t._s(e.amount))]),n("td",[t._v(t._s(e.date))]),n("td",[t._v("ðŸ—‘")])])}),0)],1)])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"modal-component"}},[a("button",{on:{click:function(e){t.toggleModal()}}},[t._v("\n    "+t._s(t.title)+"\n  ")]),t.isVisible?a("div",{staticClass:"modal-content"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"close-modal",on:{click:function(e){t.toggleModal()}}},[t._v("âœ•")]),t._t("default"),a("div",[a("button",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],on:{click:function(e){t.handleSubmit()}}},[t._v(" "+t._s(t.actionButtonText)+" ")])])],2):t._e()])},s=[],c={name:"modal-component",props:["actionButtonText","title","handleSubmit"],data:function(){return{isVisible:!1}},methods:{toggleModal:function(){return this.isVisible=!this.isVisible}}},l=c,u=(a("0d1e"),a("2877")),d=Object(u["a"])(l,o,s,!1,null,"fbeffe70",null),p=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app-table"}},[a("table",[a("thead",[a("tr",[t._l(t.tableHead,function(e){return a("th",{key:e[".key"],on:{click:function(a){e.sortable&&t.sortData(e.title)}}},[t._v("\n        "+t._s(e.title)+"\n        "),e.sortable?a("span",[t._v(" â–¼ ")]):t._e()])}),a("th",[t._v("Actions")])],2)]),a("tbody",[t._t("default")],2)])])},m=[],v={name:"app-table",props:["tableHead"],methods:{sortData:function(t){this.$store.dispatch("sortTableData",t)}}},b=v,h=(a("b1f4"),Object(u["a"])(b,f,m,!1,null,"00978c38",null)),g=h.exports;function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){D(t,e,a[e])})}return t}function D(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var _={name:"app",components:{"data-filter":p,"data-table":g},data:function(){return{initialState:{minAmount:Object({NODE_ENV:"production",BASE_URL:"/"}).dbUrl,maxAmount:"",startDate:"",endDate:""},searchCriteria:y({},this.initialState),error:{date:"",amount:"",message:""},filterBy:"amount",tableHead:[{title:"Name",sortable:!1},{title:"Description",sortable:!1},{title:"Amount",sortable:!0},{title:"Date",sortable:!0}]}},computed:{tableData:function(){return this.$store.getters.tableData},getDescription:{get:function(){return this.$store.getters.getDescription},set:function(t){var e={content:t,id:this.getDataId};return this.$store.commit("updateStateProp",e)}},getDataId:function(){return this.$store.getters.getDataId}},methods:{toggleInputBox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={id:t?t.dataKey:null,content:t?t.description:null};this.$store.dispatch("toggleInputBox",e)},updateDescription:function(){this.$store.dispatch("updateDescriptionAction")},setFilter:function(t){this.filterBy=t,this.searchCriteria=y({},this.initialState),this.error={date:"",amount:"",message:""}},filterData:function(){var t={},e=this.searchCriteria,a=e.startDate,n=e.endDate,r=e.minAmount,i=e.maxAmount,o=this.validateUserInputs();if(o)return this.$refs.filter.toggleModal(),r&&(t.minAmount=Number(r)),i&&(t.maxAmount=Number(i)),a&&(t.startDate=a),n&&(t.endDate=n),this.$store.dispatch("getTransactions",{filterParams:t,filterBy:this.filterBy})},validateUserInputs:function(){var t=this.searchCriteria,e=t.startDate,a=t.endDate,n=t.minAmount,r=t.maxAmount;if(e||a||n||r)if(r&&(n>r||!n))this.error.amount="Maximum amount should greater than minimum amount";else{if(!(a&&e>a))return!0;this.error.date="End date should be greater than start date"}else this.error.message="No data inputted"}},created:function(){this.$store.dispatch("getTransactions")}},w=_,x=(a("5c20"),Object(u["a"])(w,r,i,!1,null,"fff03348",null)),O=x.exports,C=a("2f62"),j=a("8aa5"),P=a.n(j),A={projectId:"britecore-bf340"};P.a.initializeApp(A);var I=Object(j["firestore"])(),S=I;function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){B(t,e,a[e])})}return t}function B(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}n["a"].use(C["a"]),n["a"].use(S);var N={tableData:[],dataId:"",description:"",error:""},$={tableData:function(t){return t.tableData},getDescription:function(t){return t.description},getDataId:function(t){return t.dataId}},E={updateEntryDescription:function(t){t.tableData=t.tableData.map(function(e){return e.dataKey===t.dataId?k({},e,{description:t.description}):e}),t.dataId=null},updateStateProp:function(t,e){t.description=e.content,t.dataId=e.id?e.id:null},sortTableOptions:function(t,e){var a=e.toLowerCase();t.tableData=t.tableData.sort(function(t,e){return t["".concat(a)]>e["".concat(a)]?1:e["".concat(a)]>t["".concat(a)]?-1:0})},populateTable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&e.forEach(function(e){var a=k({},e.data(),{date:e.data().date.slice(0,10),dataKey:e.id,id:null});t.tableData.push(a)})},displayError:function(t,e){t.error=e}},T={sortTableData:function(t,e){t.commit("sortTableOptions",e)},toggleInputBox:function(t,e){t.commit("updateStateProp",e)},updateDescriptionAction:function(t){return S.collection("transactions").doc(t.state.dataId).update({description:t.state.description}).then(function(){return t.commit("updateEntryDescription")}).catch(function(){return t.commit("displayError","Data update unsuccessful! try again")})},getTransactions:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=a||{},r=n.filterParams,i=n.filterBy;e=a?Object.values(r)[0]>Object.values(r)[1]?S.collection("transactions").where(i,">",Object.values(r)[1]).where(i,"<",Object.values(r)[0]):S.collection("transactions").where(i,">",Object.values(r)[0]).where(i,"<",Object.values(r)[1]):S.collection("transactions"),e.onSnapshot(function(e){t.state.tableData=[],t.commit("populateTable",e.docs)})}},M=new C["a"].Store({getters:$,mutations:E,actions:T,state:N});new n["a"]({el:"#app",render:function(t){return t(O)},store:M})},"5c20":function(t,e,a){"use strict";var n=a("6b19"),r=a.n(n);r.a},"6b19":function(t,e,a){},b0e3:function(t,e,a){t.exports=a.p+"img/edit.60a47125.svg"},b1f4:function(t,e,a){"use strict";var n=a("ffec"),r=a.n(n);r.a},b503:function(t,e,a){},ffec:function(t,e,a){}});
//# sourceMappingURL=app.7e851a10.js.map